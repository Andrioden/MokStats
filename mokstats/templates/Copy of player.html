{% extends "base.html" %} 

{% block title %}Enter{% endblock %}

{% block imports %}

{% endblock %} 

{% block content %}


	
	<!-- Start of first page -->
	<div data-role="page" id="player_page_{{name}}">
	
		<div data-role="header">
			<a href="../../" data-role="button" data-icon="home" data-iconpos="notext"></a>
			<a href="../" data-role="button" data-icon="back">Spillere</a>
			<h1>{{ name }}</h1>
		</div>
		
	
		<div data-role="content">
			<div class="center_outer">
				<div id="{{name}}_pie_graph" class="graph center_inner"></div>
			</div>
		
		</div>
		
		<script>
			$("#player_page_{{name}}").on('pageinit', function(){
				/*
				* This method is a semi-hax that attempts to init the graph in
				* an interval until it succeds. I was unable to trigger the method
				* at the correct time.
				*/
				var interval = setInterval(function(){
					initPlayerGraph("{{ name }}", {{ played }}, {{ won }}, {{ lost }});
					if ($("#{{ name }}_pie_graph").find('canvas').length > 0) {
						window.clearInterval(interval);		
					}
				},100);
				
			});
			
			function initPlayerGraph(name, played, won, lost) {
				var other = played - won - lost;
			    var s1 = [
			    	['Vunnet ('+won+')', won], 
			    	['Annet ('+other+')', other],
			    	['Tapt ('+lost+')', lost],
			    ];

			    var plot = $.jqplot(name+'_pie_graph', [s1], {
			    	seriesColors: ['#90EE90', '#F0F03F', '#FC7E7E'],
			        /*grid: {
			            drawBorder: false,
			            drawGridlines: false,
			            background: '#EEEEEE',
			            shadow:false
			        },*/
			        axesDefaults: {
			             
			        },
			        seriesDefaults:{
			            renderer:$.jqplot.PieRenderer,
			            rendererOptions: {
			                showDataLabels: true
			            }
			        },
			        legend: {
			            show: true,
			            rendererOptions: {
			                numberRows: 1
			            },
			            location: 's'
			        }
			    });
			}
		</script>
	
	</div>


{% endblock %}